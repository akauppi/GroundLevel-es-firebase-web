{
  "name": "@local/back-end",
  "description": "Sample back-end",
  "license": "MIT",
  "private": true,
  "type": "module",
  "files": [
    "functions/*.js",
    "firestore.rules",
    "firestore.indexes.json"
  ],
  "engines": {
    "node": ">=13.2",
    "npm": ">= 7.7.0"
  },
  "scripts": {
    "test": "npm run ci",
    "ci": "npm run ci:seq",
    "  ": "",
    "ci:seq": "firebase emulators:exec --project=fns-test --only firestore,functions \"npm run --silent _ci_fns && npm run --silent _ci_rules\"",
    "_ci_fns": "npm run test:fns:all",
    "_ci_rules": "npm run test:rules:all",
    "ci:par": "firebase emulators:exec --project=fns-test --only firestore,functions \"npm run --silent _ci_par_2\"",
    "_ci_par_2": "concurrently -n test-fns,test-rules \"npm run _ci_fns\" \"npm run _ci_rules\"",
    "  -": "",
    "start": "firebase emulators:start --project=fns-test --only functions,firestore",
    "test:fns:logging": "NODE_OPTIONS=\"--experimental-vm-modules --experimental-json-modules\" jest --config test-fns/jest.config.js -f logging.test.js --verbose --detectOpenHandles --all",
    "//test:fns:userInfo": "NODE_OPTIONS=--experimental-vm-modules jest --config test-fns/jest.config.js -f userInfo.test.js --verbose --detectOpenHandles --all",
    "test:fns:all": "NODE_OPTIONS=\"--experimental-vm-modules --experimental-json-modules\" jest --config test-fns/jest.config.js --verbose --detectOpenHandles --all",
    "  --": "",
    "test:rules:invites": "NODE_OPTIONS=--experimental-vm-modules jest --config test-rules/jest.config.js -f invitesC.test.js --verbose --detectOpenHandles --all",
    "test:rules:projects": "NODE_OPTIONS=--experimental-vm-modules jest --config test-rules/jest.config.js -f projectsC/index.test.js --verbose --detectOpenHandles --all",
    "test:rules:projectsSymbols": "NODE_OPTIONS=--experimental-vm-modules jest --config test-rules/jest.config.js -f projectsC/symbolsC.test.js --verbose --detectOpenHandles --all",
    "test:rules:projectsUserInfo": "NODE_OPTIONS=--experimental-vm-modules jest --config test-rules/jest.config.js -f projectsC/userInfoC.test.js --verbose --detectOpenHandles --all",
    "//test:rules:userInfo": "NODE_OPTIONS=--experimental-vm-modules jest --config test-rules/jest.config.js -f userInfoC.test.js --verbose --detectOpenHandles --all",
    "test:rules:all": "NODE_OPTIONS=--experimental-vm-modules jest --config test-rules/jest.config.js --verbose --detectOpenHandles --all",
    " -- ": "",
    "deploy": "firebase deploy --only functions,firestore",
    "predeploy": "tools/hack.sh 1",
    "postdeploy": "tools/hack.sh 2",
    " -- -": "",
    "prepare": "npm --prefix functions install",
    " -- - ": "",
    "//": "firebase --version",
    "//predeploy": "npm run --silent _checkActivation",
    "//_checkActivation": "check-activation || ( >&2 echo \"ERROR: No active project. Please run 'npm run activate' at project root.\n\"; exit 1)"
  },
  "devDependencies": {
    "@local/tools": "file:../../tools",
    "concurrently": "^6.0.2",
    "eslint-plugin-node": "^11.1.0",
    "firebase-jest-testing": "^0.0.3-alpha.2",
    "jest": "^27.0.0-next.9",
    "jest-circus": "^27.0.0-next.9"
  },
  "//comments": {
    "engines.node": [
      "'>=14.3' for 'â€”harmony-top-level-await'",
      "'>=13.2' for ES module support"
    ],
    "engines.npm": [
      "There is no single *pressing* reason why, but the two (6 vs. 7) seem slightly incompatible. Instead of being",
      "bitten by this, since npm 7 is now stable and released, let's require it.",
      "",
      "NOTE: 'npm@6' does not seem to observe the 'engines.npm' - it still runs!"
    ],
    "devDependencies": {
      "NOT having firebase-tools": [
        "It seems to get detected from the project root (npm 7.11.2, node 16.0.0). That's brilliant! Is it documented??"
      ]
    },
    "scripts": {
      "//preinstall": [
        "There does not seem to exist a need for '(cd functions && npm install)', now that we depend on 'file:functions'",
        "Keep an eye on it. If needed, a 'preinstall' script can be used to create 'functions/node_modules'."
      ],
      "prepare": [
        "It is important someone runs 'npm install' also for the 'functions'. This is needed for: deployment, CI/CD tests.",
        "We rather do it here, quietly, than expose such details to the CI/CD script."
      ]
    }
  }
}
